{% extends 'base.html' %}
{% block title %}Dashboard | Aurora School{% endblock %}
{% block content %}
<section class="page-header">
    <h1>Welcome, {{ user.first_name|default:user.username }}</h1>
    <p>{{ user.display_role }}</p>
</section>
<section class="grid two-col">
    {% if user.role == 'student' %}
        <div class="card">
            <h3>Assignments</h3>
            <ul class="list">
                {% for a in assignments %}<li>{{ a.title }} — Due {{ a.due_date }}</li>{% empty %}<li>None</li>{% endfor %}
            </ul>
        </div>
        <div class="card">
            <h3>Study Materials</h3>
            <ul class="list">{% for m in materials %}<li>{{ m.title }}</li>{% empty %}<li>No materials.</li>{% endfor %}</ul>
        </div>
        <div class="card">
            <h3>Attendance</h3>
            <ul class="list">{% for att in attendance %}<li>{{ att.date }} — {{ att.status }}</li>{% empty %}<li>No records.</li>{% endfor %}</ul>
        </div>
        <div class="card">
            <h3>Grades</h3>
            <ul class="list">{% for g in grades %}<li>{{ g.subject.name }} — {{ g.score }}</li>{% empty %}<li>No grades.</li>{% endfor %}</ul>
        </div>
    {% elif user.role == 'parent' %}
        <div class="card">
            <h3>Fee Receipts</h3>
            <ul class="list">{% for fee in fees %}<li>{{ fee.paid_on }} — ${{ fee.amount }}</li>{% empty %}<li>No receipts yet.</li>{% endfor %}</ul>
        </div>
        <div class="card">
            <h3>Notices</h3>
            <ul class="list">{% for n in notices %}<li>{{ n.title }}</li>{% empty %}<li>No notices.</li>{% endfor %}</ul>
        </div>
    {% elif user.role == 'teacher' %}
        <div class="card">
            <h3>Your Classes</h3>
            <ul class="list">{% for c in classes %}<li>{{ c.name }}</li>{% empty %}<li>No classes.</li>{% endfor %}</ul>
        </div>
        <div class="card">
            <h3>Assignments</h3>
            <ul class="list">{% for a in assignments %}<li>{{ a.title }}</li>{% empty %}<li>No assignments.</li>{% endfor %}</ul>
        </div>
    {% else %}
        <div class="card">
            <h3>Admissions Overview</h3>
            <ul class="list">{% for app in applications %}<li>{{ app.student_name }} — {{ app.status|capfirst }}</li>{% empty %}<li>No applications.</li>{% endfor %}</ul>
        </div>
        <div class="card">
            <h3>Analytics</h3>
            <ul class="list">
                <li>Total Assignments: {{ analytics.students }}</li>
                <li>Attendance records: {{ analytics.attendance }}</li>
                <li>Events scheduled: {{ analytics.events }}</li>
            </ul>
        </div>
    {% endif %}
</section>
{% endblock %}
